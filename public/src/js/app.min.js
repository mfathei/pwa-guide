"use strict";var deferredPrompt;var notificationButtons=document.querySelectorAll(".enable-notifications");if(!window.Promise){window.Promise=Promise}if("serviceWorker"in navigator){navigator.serviceWorker.register("/service-worker.js").then(function(){console.log("service worker registered!")}).catch(function(i){console.log(i)})}window.addEventListener("beforeinstallprompt",function(i){console.log("beforeinstallprompt fired");i.preventDefault();deferredPrompt=i;return false});function displayConfirmNotification(){if("serviceWorker"in navigator){var o={body:"You Successfully Subscribed to our Notifications system",icon:"/src/images/icons/app-icon-96x96.png",image:"/src/images/sf-boat.jpg",dir:"ltr",lang:"en-US",vibrate:[100,50,200],badge:"/src/images/icons/app-icon-96x96.png",tag:"confirm-notification",renotify:true,actions:[{action:"confirm",title:"Okay",icon:"/src/images/icons/app-icon-96x96.png"},{action:"cancel",title:"Cancel",icon:"/src/images/icons/app-icon-96x96.png"}]};navigator.serviceWorker.ready.then(function(i){i.showNotification("Successfully Subscribed",o)})}}var reg;function configurePushSub(){if(!("serviceWorker"in navigator)){return}navigator.serviceWorker.ready.then(function(i){reg=i;return i.pushManager.getSubscription()}).then(function(i){if(!i){var o="BLet4p6u28mtoXKDmbGx1eHtXxHb8zRRSruyP-I7Hl9z7a6mYZd33_ogVCkMIZ2fTT806Lb4XtkoE7ALHPBGoSM";var n=urlBase64ToUint8Array(o);return reg.pushManager.subscribe({userVisibleOnly:true,applicationServerKey:n})}else{console.log("we have a Subscription")}}).then(function(i){console.log(i);var o="http://localhost:3000/api/subscriptions";return fetch(o,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(i)})}).then(function(i){displayConfirmNotification()}).catch(function(i){console.log(i)})}function askForNotificationPermission(){var i=Notification.requestPermission(function(i){console.log("User Choice",i);if(i!=="granted"){console.log("No notification permission",i)}else{configurePushSub()}})}if("Notification"in window&&"serviceWorker"in navigator){for(var i=0;i<notificationButtons.length;i++){notificationButtons[i].style.display="inline-block";notificationButtons[i].addEventListener("click",askForNotificationPermission)}}