window.setImmediate||function(){"use strict";var o=0;var a={};var f=true;var r=Array.prototype.slice;var u="setImmediatePolyfillMessage";function t(e){var n=e[0];switch(e.length){case 1:return n();case 2:return n(e[1]);case 3:return n(e[1],e[2])}return n.apply(window,r.call(e,1))}function c(e){var n=e.data;var r;if(typeof n=="string"&&n.indexOf(u)==0){r=a[n];if(r){delete a[n];t(r)}}}window.setImmediate=function e(){var n=o++;var r=u+n;var t=arguments.length;var i=new Array(t);while(t--){i[t]=arguments[t]}a[r]=i;if(f){f=false;window.addEventListener("message",c)}window.postMessage(r,"*");return n};window.clearImmediate=function e(n){delete a[u+n]}}();(function(e){"use strict";var c="[[PromiseStatus]]";var s="[[PromiseValue]]";var i="[[OnFulfilled]]";var t="[[OnRejected]]";var l="[[OriginalError]]";var o="pending";var a="internal pending";var v="fulfilled";var d="rejected";var h="not an array.";var r='constructor Promise requires "new".';var w="then() cannot return same Promise that it resolves.";var m=e.setImmediate||require("timers").setImmediate;var p=Array.isArray||function(e){return Object.prototype.toString.call(e)=="[object Array]"};function n(e){this[l]=e}function y(e){return e instanceof n}function f(e){return Object(e)===e}function g(e){return typeof e=="function"}function P(e){return e instanceof q}function j(e){return e}function E(e){throw e}function I(e,n,r){if(!e[i]){e[i]=[];e[t]=[]}e[i].push(n);e[t].push(r)}function u(e){delete e[i];delete e[t]}function O(e){var n;var r=e.length;for(n=0;n<r;n++){e[n]()}}function b(e,n,r){var t=A(r);if(P(t)){t.then(e,n)}else if(y(t)){n(t[l])}else{e(r)}}function A(r){var t;if(P(r)){return r}if(f(r)){try{t=r.then}catch(e){return new n(e)}if(g(t)){return new q(function(e,n){m(function(){try{t.call(r,e,n)}catch(e){n(e)}})})}}return null}function T(n,e){function r(e){if(n[c]==o){x(n,e)}}function t(e){if(n[c]==o){k(n,e)}}try{e(r,t)}catch(e){t(e)}}function x(n,e){var r;var t=A(e);if(P(t)){n[c]=a;t.then(function(e){x(n,e)},function(e){k(n,e)})}else if(y(t)){k(n,t[l])}else{n[c]=v;n[s]=e;r=n[i];if(r&&r.length){u(n);O(r)}}}function k(e,n){var r=e[t];e[c]=d;e[s]=n;if(r&&r.length){u(e);O(r)}}function q(e){var n=this;if(!P(n)){throw new TypeError(r)}n[c]=o;n[s]=undefined;T(n,e)}q.prototype.then=function(o,a){var f=this;var u;o=g(o)?o:j;a=g(a)?a:E;u=new q(function(r,t){function e(e){var n;try{n=e(f[s])}catch(e){t(e);return}if(n===u){t(new TypeError(w))}else{b(r,t,n)}}function n(){m(e,o)}function i(){m(e,a)}switch(f[c]){case v:n();break;case d:i();break;default:I(f,n,i)}});return u};q.prototype["catch"]=function(e){return this.then(j,e)};q.resolve=function(r){var t=A(r);if(P(t)){return t}return new q(function(e,n){if(y(t)){n(t[l])}else{e(r)}})};q.reject=function(r){return new q(function(e,n){n(r)})};q.race=function(i){return new q(function(e,n){var r;var t;if(p(i)){t=i.length;for(r=0;r<t;r++){b(e,n,i[r])}}else{n(new TypeError(h))}})};q.all=function(u){return new q(function(r,e){var t=0;var i=0;var n;var o;var a;var f;if(p(u)){u=u.slice(0);o=u.length;for(f=0;f<o;f++){a=u[f];n=A(a);if(P(n)){i++;n.then(function(n){return function(e){u[n]=e;t++;if(t==i){r(u)}}}(f),e)}else if(y(n)){e(n[l])}else{u[f]=a}}if(!i){r(u)}}else{e(new TypeError(h))}})};if(typeof module!="undefined"&&module.exports){module.exports=e.Promise||q}else if(!e.Promise){e.Promise=q}})(this);